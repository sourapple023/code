<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Playground</title>
<style>
    body {
        background:#0b0f17;
        color:white;
        font-family:sans-serif;
        margin:0;
        padding:0;
        display:flex;
        flex-direction:column;
        height:100vh;
        overflow:hidden;
    }

    #editors {
        display:flex;
        gap:10px;
        padding:10px;
        flex:1;
        overflow-y:auto;
    }

    textarea {
        width:33%;
        height:100%;
        background:#101725;
        color:#78caff;
        border:none;
        padding:10px;
        resize:none;
        font-size:14px;
        border-radius:6px;
    }

    #previewSection {
        height:45vh;
        border-top:1px solid #222;
        background:black;
        position:relative;
    }

    iframe {
        width:100%;
        height:100%;
        border:none;
    }

    #status {
        position:absolute;
        bottom:8px;
        left:8px;
        font-size:13px;
        color:#8df38d;
    }

    button{
        background:#1b2435;
        color:white;
        border:none;
        padding:6px 14px;
        border-radius:6px;
        cursor:pointer;
    }
    button:hover{
        opacity:0.8;
    }
</style>
</head>

<body>

<div id="editors">
<textarea id="htmlInput"></textarea>
<textarea id="cssInput"></textarea>
<textarea id="jsInput"></textarea>
</div>

<div id="previewSection">
    <iframe id="previewFrame"></iframe>
    <div id="status">Synced</div>
</div>

<div style="padding:10px;background:#0a0e14;">
    <button id="resetBtn">Reset</button>
</div>

<script>

function buildSrcDoc(html, css, js){
    return `
<!DOCTYPE html>
<html>
<head><style>${css}</style></head>
<body>
${html}

<script>
${js}
<\/script>

</body>
</html>
`;
}

let updateTimer=null;

const htmlInput=document.getElementById("htmlInput");
const cssInput=document.getElementById("cssInput");
const jsInput=document.getElementById("jsInput");
const previewFrame=document.getElementById("previewFrame");
const statusText=document.getElementById("status");
const resetBtn=document.getElementById("resetBtn");

function updatePreview(){
    const srcDoc=buildSrcDoc(
        htmlInput.value,
        cssInput.value,
        jsInput.value
    );

    statusText.textContent="Updating…";
    previewFrame.srcdoc=srcDoc;

    setTimeout(()=>{
        statusText.textContent="Synced";
    },150);
}

function scheduleUpdate(){
    statusText.textContent="Typing…";
    if(updateTimer) clearTimeout(updateTimer);
    updateTimer=setTimeout(updatePreview,350);
}

htmlInput.addEventListener("input",scheduleUpdate);
cssInput.addEventListener("input",scheduleUpdate);
jsInput.addEventListener("input",scheduleUpdate);

function setDefaults(){
    htmlInput.value=`<h1>Hello Mini Playground</h1>`;
    cssInput.value=`h1{color:#78caff;text-align:center;}`;
    jsInput.value=`console.log("JS running!");`;
    updatePreview();
}

resetBtn.addEventListener("click",setDefaults);

setDefaults();

</script>

</body>
</html>
